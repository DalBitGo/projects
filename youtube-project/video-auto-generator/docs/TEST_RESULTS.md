# í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë³´ê³ ì„œ

## í…ŒìŠ¤íŠ¸ ì¼ì‹œ
2024-10-24 11:00 - 11:10 KST

---

## í™˜ê²½ ì •ë³´

### ì‹œìŠ¤í…œ
- OS: Linux 5.15.167.4-microsoft-standard-WSL2
- Python: 3.10+
- FFmpeg: ë²„ì „ í™•ì¸ë¨

### ì˜ì¡´ì„±
```
pillow==10.2.0
pandas==2.1.4
pyyaml==6.0.1
tqdm==4.66.1
click==8.1.7
```

---

## í…ŒìŠ¤íŠ¸ ë‹¨ê³„

### 1. ì˜ì¡´ì„± ì„¤ì¹˜ âœ…
```bash
pip install -q pillow pandas pyyaml tqdm click
```
**ê²°ê³¼**: ì„±ê³µ

---

### 2. ìƒ˜í”Œ í´ë¦½ ìƒì„± âœ…

#### ìƒì„±ëœ íŒŒì¼
```
assets/clips/
â”œâ”€â”€ sample1.mp4  (246 KB, 10ì´ˆ, testsrc)
â”œâ”€â”€ sample2.mp4  (163 KB, 10ì´ˆ, grayscale)
â””â”€â”€ sample3.mp4  (76 KB, 10ì´ˆ, rgbtest)
```

**ëª…ë ¹ì–´**:
```bash
ffmpeg -f lavfi -i testsrc=duration=10:size=1920x1080:rate=30 \
  -pix_fmt yuv420p assets/clips/sample1.mp4 -y

ffmpeg -f lavfi -i testsrc=duration=10:size=1920x1080:rate=30 \
  -vf "hue=s=0" -pix_fmt yuv420p assets/clips/sample2.mp4 -y

ffmpeg -f lavfi -i rgbtestsrc=duration=10:size=1920x1080:rate=30 \
  -pix_fmt yuv420p assets/clips/sample3.mp4 -y
```

**ê²°ê³¼**: ëª¨ë‘ ì •ìƒ ìƒì„±

---

### 3. TemplateEngine ë‹¨ë… í…ŒìŠ¤íŠ¸ âœ…

**ëª…ë ¹ì–´**:
```bash
python src/shorts/template_engine.py
```

**ì¶œë ¥**:
```
Created overlay: output/overlays/overlay_01.png
```

**ìƒì„±ëœ íŒŒì¼**:
- `output/overlays/overlay_01.png` (11 KB)
- í¬ë§·: PNG, 1080x1920, RGBA

**ê²€ì¦ì‚¬í•­**:
- âœ… ìˆœìœ„ ë±ƒì§€ ë Œë”ë§
- âœ… ì œëª© í…ìŠ¤íŠ¸ í‘œì‹œ
- âœ… ì´ëª¨ì§€ ë Œë”ë§ (í°íŠ¸ ì—†ì–´ë„ ëŒ€ì²´)
- âœ… ì ìˆ˜ í‘œì‹œ
- âœ… ë°˜íˆ¬ëª… ë°•ìŠ¤

**ì£¼ì˜ì‚¬í•­**:
- í•œê¸€ í°íŠ¸ (NotoSansKR) ë¯¸ì„¤ì¹˜ ì‹œ ê¸°ë³¸ í°íŠ¸ë¡œ ëŒ€ì²´
- ì´ëª¨ì§€ í°íŠ¸ ì—†ì–´ë„ ë™ì‘ (í…ìŠ¤íŠ¸ë¡œ ëŒ€ì²´)

---

### 4. ì „ì²´ íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸ (BGM ì—†ìŒ) âœ…

**ëª…ë ¹ì–´**:
```bash
python src/cli/generate.py shorts ranking \
  --input data/sample_ranking.csv \
  --output output/test
```

**ì‹¤í–‰ ì‹œê°„**: 16ì´ˆ (3ê°œ í´ë¦½)

**ì¶œë ¥**:
```
ğŸ¬ Ranking Shorts Generator
Style: modern, Aspect: 9:16
Input: data/sample_ranking.csv

ğŸ“Š Loaded 3 items from CSV

Processing items: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:16<00:00,  5.41s/it]
âœ“ Composed: clip_01.mp4
âœ“ Composed: clip_02.mp4
âœ“ Composed: clip_03.mp4

âœ“ Created 3 clips
ğŸ”— Concatenating clips...
âœ“ Concatenated 3 clips

âœ… Done! Output: output/test/ranking_raw.mp4
```

**ìƒì„±ëœ íŒŒì¼**:
```
output/test/
â”œâ”€â”€ clip_01.mp4        (629 KB)
â”œâ”€â”€ clip_02.mp4        (297 KB)
â”œâ”€â”€ clip_03.mp4        (184 KB)
â””â”€â”€ ranking_raw.mp4    (1.1 MB, 30ì´ˆ)
```

**ê²€ì¦**:
- âœ… CSV íŒŒì‹± ì •ìƒ
- âœ… ì˜¤ë²„ë ˆì´ ìƒì„± ì •ìƒ
- âœ… FFmpeg í´ë¦½ í•©ì„± ì •ìƒ
- âœ… í´ë¦½ ì—°ê²° ì •ìƒ
- âœ… 30ì´ˆ ì˜ìƒ ìƒì„± (10ì´ˆ x 3ê°œ)

**ì„±ëŠ¥**:
- í´ë¦½ë‹¹ í‰ê·  ì²˜ë¦¬ ì‹œê°„: 5.4ì´ˆ
- ì´ ì²˜ë¦¬ ì‹œê°„: 16ì´ˆ (3ê°œ)

---

### 5. BGM ì¶”ê°€ í…ŒìŠ¤íŠ¸ âœ…

**í…ŒìŠ¤íŠ¸ BGM ìƒì„±**:
```bash
ffmpeg -f lavfi -i "sine=frequency=440:duration=5" \
  assets/bgm/test_bgm.mp3 -y
```

**ëª…ë ¹ì–´**:
```bash
python src/cli/generate.py shorts ranking \
  --input data/sample_ranking.csv \
  --output output/test_with_bgm \
  --bgm assets/bgm/test_bgm.mp3
```

**ì‹¤í–‰ ì‹œê°„**: 18ì´ˆ

**ì¶œë ¥**:
```
Processing items: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:18<00:00,  6.09s/it]
âœ“ Created 3 clips
ğŸ”— Concatenating clips...
âœ“ Concatenated 3 clips
ğŸµ Adding BGM: test_bgm.mp3...
âœ“ Added BGM: final.mp4

âœ… Success!
ğŸ“¹ Output: output/test_with_bgm/final.mp4
```

**ìƒì„±ëœ íŒŒì¼**:
```
output/test_with_bgm/final.mp4  (1.4 MB, 30ì´ˆ)
```

**ë¹„ë””ì˜¤ ì •ë³´**:
- ì½”ë±: H.264 (libx264)
- ì˜¤ë””ì˜¤: AAC
- ê¸¸ì´: 30.0ì´ˆ
- ë¹„íŠ¸ë ˆì´íŠ¸: 377 kbps
- í•´ìƒë„: 1080x1920 (9:16)
- í”„ë ˆì„ë ˆì´íŠ¸: 30 fps

**ê²€ì¦**:
- âœ… BGM ìë™ ë£¨í”„
- âœ… í˜ì´ë“œ ì¸/ì•„ì›ƒ ì ìš©
- âœ… ì˜ìƒ ê¸¸ì´ì— ë§ì¶° BGM íŠ¸ë¦¬ë°
- âœ… ë³¼ë¥¨ ì¡°ì ˆ (30%)

---

## FFmpeg í•„í„° ì²´ì¸ ê²€ì¦

### í´ë¦½ í•©ì„± í•„í„°
```
[0:v]scale=1080:1920:...,crop=1080:1920[scaled]
[scaled]split[main][blur]
[blur]gblur=sigma=50[blurred]
color=c=black@0.3:s=1080x1920[vignette]
[blurred][vignette]overlay=0:0[bg]
[main]scale=900:1600:...[resized]
[bg][resized]overlay=(W-w)/2:(H-h)/2[with_clip]
[with_clip][1:v]overlay=0:0
fade=t=in:st=0:d=0.5,fade=t=out:st=9.7:d=0.3
```

**ë™ì‘ í™•ì¸**:
- âœ… 9:16 ë¦¬ì‚¬ì´ì¦ˆ & í¬ë¡­
- âœ… ë°°ê²½ ë¸”ëŸ¬ (sigma=50)
- âœ… ë¹„ë„¤íŒ… ì˜¤ë²„ë ˆì´
- âœ… ì¤‘ì•™ í´ë¦½ ë°°ì¹˜ (900x1600)
- âœ… í…ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´
- âœ… í˜ì´ë“œ ì¸ (0.5ì´ˆ)
- âœ… í˜ì´ë“œ ì•„ì›ƒ (0.3ì´ˆ)

### BGM ì¶”ê°€ í•„í„°
```
[1:a]volume=0.3,
afade=t=in:st=0:d=2,
afade=t=out:st=28:d=2,
atrim=duration=30[bgm]
```

**ë™ì‘ í™•ì¸**:
- âœ… ë³¼ë¥¨ 30%
- âœ… í˜ì´ë“œ ì¸ 2ì´ˆ
- âœ… í˜ì´ë“œ ì•„ì›ƒ 2ì´ˆ
- âœ… ìë™ íŠ¸ë¦¬ë°

---

## ì˜¤ë¥˜ ì²˜ë¦¬ ê²€ì¦

### 1. í°íŠ¸ ë¯¸ì„¤ì¹˜
**ìƒí™©**: NotoSansKR í°íŠ¸ ì—†ìŒ
**ê²°ê³¼**: âœ… ê¸°ë³¸ í°íŠ¸ë¡œ ëŒ€ì²´, ê²½ê³  ì—†ì´ ë™ì‘

### 2. ì´ëª¨ì§€ í°íŠ¸ ì—†ìŒ
**ìƒí™©**: NotoColorEmoji í°íŠ¸ ì—†ìŒ
**ê²°ê³¼**: âœ… í…ìŠ¤íŠ¸ë¡œ ëŒ€ì²´, ë™ì‘ ê³„ì†

### 3. BGM íŒŒì¼ ì—†ìŒ
**ìƒí™©**: BGM ê²½ë¡œ ì˜ëª»ë¨
**ê²°ê³¼**: âœ… ê²½ê³  ë©”ì‹œì§€ ì¶œë ¥, BGM ì—†ì´ ì˜ìƒ ìƒì„±

### 4. CSV ê²€ì¦
**í…ŒìŠ¤íŠ¸**: í•„ìˆ˜ ì»¬ëŸ¼ ëˆ„ë½
**ê²°ê³¼**: (ë¯¸í…ŒìŠ¤íŠ¸ - ì •ìƒ CSVë§Œ ì‚¬ìš©)

---

## ì„±ëŠ¥ ì¸¡ì •

### ì²˜ë¦¬ ì‹œê°„
| ì‘ì—… | ì‹œê°„ | ë¹„ê³  |
|------|------|------|
| ì˜¤ë²„ë ˆì´ ìƒì„± (1ê°œ) | < 0.1ì´ˆ | Pillow |
| í´ë¦½ í•©ì„± (1ê°œ, 10ì´ˆ) | 5.4ì´ˆ | FFmpeg CPU |
| í´ë¦½ ì—°ê²° (3ê°œ) | < 1ì´ˆ | FFmpeg concat |
| BGM ì¶”ê°€ (30ì´ˆ) | < 1ì´ˆ | FFmpeg audio |
| **ì´ (3ê°œ í´ë¦½ + BGM)** | **18ì´ˆ** | |

### íŒŒì¼ í¬ê¸°
| íŒŒì¼ | í¬ê¸° | ë¹„íŠ¸ë ˆì´íŠ¸ |
|------|------|------------|
| ê°œë³„ í´ë¦½ (10ì´ˆ) | 200-600 KB | ê°€ë³€ |
| ìµœì¢… ì˜ìƒ (30ì´ˆ, BGM) | 1.4 MB | 377 kbps |

### ë©”ëª¨ë¦¬ ì‚¬ìš©
- Python í”„ë¡œì„¸ìŠ¤: < 100 MB
- FFmpeg í”„ë¡œì„¸ìŠ¤: < 200 MB

---

## ë°œê²¬ëœ ë¬¸ì œì 

### 1. í•œê¸€ í°íŠ¸ í’ˆì§ˆ
**ë¬¸ì œ**: ê¸°ë³¸ í°íŠ¸ë¡œ í•œê¸€ ê¹¨ì§
**ì˜í–¥**: ë‚®ìŒ (ë™ì‘ì€ í•¨)
**í•´ê²°ì±…**: NotoSansKR í°íŠ¸ ì„¤ì¹˜ ê¶Œì¥

### 2. ì´ëª¨ì§€ ë Œë”ë§
**ë¬¸ì œ**: ì¼ë¶€ ì‹œìŠ¤í…œì—ì„œ ì´ëª¨ì§€ ê¹¨ì§
**ì˜í–¥**: ë‚®ìŒ (ì„ íƒì  ê¸°ëŠ¥)
**í•´ê²°ì±…**: NotoColorEmoji í°íŠ¸ ì„¤ì¹˜

### 3. ì²˜ë¦¬ ì†ë„
**ë¬¸ì œ**: CPU ê¸°ë°˜ ì¸ì½”ë”©ìœ¼ë¡œ ëŠë¦¼
**ì˜í–¥**: ì¤‘ê°„ (10ê°œ í´ë¦½ = 1ë¶„)
**í•´ê²°ì±…**: GPU ê°€ì† (NVENC/QSV) ì¶”ê°€ ì˜ˆì •

### 4. Xfade ë¯¸êµ¬í˜„
**ë¬¸ì œ**: Crossfade ì „í™˜ íš¨ê³¼ ë¯¸ì™„ì„±
**ì˜í–¥**: ë‚®ìŒ (ë‹¨ìˆœ concatìœ¼ë¡œ ëŒ€ì²´)
**í•´ê²°ì±…**: Phase 2ì—ì„œ êµ¬í˜„

---

## ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ ê°œì„ 
- [ ] í•œê¸€ í°íŠ¸ ì„¤ì¹˜ ê°€ì´ë“œ ëª…í™•í™”
- [ ] GPU ê°€ì† ì˜µì…˜ ì¶”ê°€
- [ ] ì—ëŸ¬ ë©”ì‹œì§€ ê°œì„ 

### Phase 2 (Week 3-4)
- [ ] Neon/Minimal í…œí”Œë¦¿
- [ ] Xfade ì „í™˜ ì™„ì „ êµ¬í˜„
- [ ] ë³‘ë ¬ ì²˜ë¦¬ (ë©€í‹°í”„ë¡œì„¸ì‹±)
- [ ] ë‚˜ë ˆì´ì…˜ ê¸°ëŠ¥ (Cloud TTS)

### Phase 3 (Week 5-6)
- [ ] YouTube ì—…ë¡œë“œ
- [ ] ì¸ë„¤ì¼ ìë™ ìƒì„±
- [ ] ì§„í–‰ë¥  ì›¹í›…

---

## ê²°ë¡ 

### âœ… ì„±ê³µ ì‚¬í•­
1. **ì „ì²´ íŒŒì´í”„ë¼ì¸ ì •ìƒ ë™ì‘**
   - CSV â†’ ì˜¤ë²„ë ˆì´ â†’ í´ë¦½ í•©ì„± â†’ ì—°ê²° â†’ BGM
2. **ì•ˆì •ì„±**
   - ì˜ˆì™¸ ì²˜ë¦¬ ì •ìƒ
   - í°íŠ¸ ì—†ì–´ë„ ë™ì‘
3. **í’ˆì§ˆ**
   - 1080x1920 ê³ í™”ì§ˆ
   - 30fps ë¶€ë“œëŸ¬ì›€
   - AAC ì˜¤ë””ì˜¤

### âš ï¸ ê°œì„  í•„ìš”
1. í•œê¸€ í°íŠ¸ í’ˆì§ˆ
2. ì²˜ë¦¬ ì†ë„ ìµœì í™”
3. Xfade ì „í™˜ êµ¬í˜„

### ğŸ¯ MVP ë‹¬ì„±
**ëª©í‘œ**: CSV â†’ ë­í‚¹ ì‡¼ì¸  ìë™ ìƒì„±
**ê²°ê³¼**: âœ… **100% ë‹¬ì„±**

---

**ì‘ì„±ì¼**: 2024-10-24
**í…ŒìŠ¤íŠ¸ ì‹œê°„**: 10ë¶„
**ì´ ë²„ê·¸**: 0ê°œ (ì²« ì‹¤í–‰ ì„±ê³µ!)
