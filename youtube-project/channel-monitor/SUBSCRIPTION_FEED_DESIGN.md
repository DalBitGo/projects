# 구독 채널 피드 인텔리전스 - 기획서 (간소화 버전)

> **컨셉**: 구독한 채널들의 최신 영상을 한눈에 보고, 트렌드를 파악하고, 아이디어를 얻는 대시보드

## 🎯 핵심 변경사항 (실용화)

### ✅ 간소화된 부분
1. **Transcript**: 자동 수집 ❌ → 사용자가 버튼 클릭해서 다운로드 ✅
   - 관심 있는 영상만 선택적으로 다운로드
   - API quota 절약, 복잡도 감소
   - 다운받은 파일은 로컬에서 직접 분석

### ✅ 추가된 기능
2. **쇼츠 vs 롱폼 구분**: 60초 기준으로 자동 분류
   - 탭으로 롱폼/쇼츠 분리해서 보기
   - 각 포맷별 성과 비교 분석
   - 어떤 포맷이 더 효과적인지 인사이트 제공

---

## 🎯 핵심 문제 정의

### 현재 YouTube의 문제점
1. **홈 피드**: 알고리즘이 추천하는 영상들로 넘쳐남 (내가 구독한 채널이 묻힘)
2. **구독 피드**: 시간순 나열만 있고 필터링/분석 불가
3. **인사이트 없음**: "이 영상이 조회수가 높네" → 그래서?

### 우리가 해결할 것
✅ 구독 채널만 선별해서 보기 (노이즈 제거)
✅ 카테고리별 필터링 (랭킹/미스터리/리뷰 등)
✅ 실용적 인사이트 (어떤 주제가 핫한지, 어떤 패턴이 성공하는지)
✅ 빠른 정보 습득 (Transcript로 영상 안 봐도 내용 파악)

---

## 👤 사용자 시나리오

### 시나리오 1: 아침 루틴 (5-10분)
```
1. 대시보드 열기
2. "어제 올라온 영상" 필터
3. 조회수순 정렬로 쭉 스크롤
4. 썸네일 + 제목만 보고 관심 있는 거 클릭
5. Transcript 훑어보기 (영상 안 봐도 됨)
6. "아, 이 주제가 요즘 핫하구나" 메모
```

### 시나리오 2: 주간 트렌드 파악 (10-15분)
```
1. "지난 7일" 필터
2. 카테고리별 탭 (랭킹/미스터리/교육 등)
3. "핫 키워드 TOP 10" 확인
4. "평균 조회수 2배 이상" 영상만 필터
5. 공통 패턴 발견: "숫자 리스트 제목이 잘되네"
6. 다음 주 영상 아이디어 메모
```

### 시나리오 3: 경쟁사 벤치마킹 (20-30분)
```
1. 특정 카테고리 선택 (예: "랭킹")
2. 조회수 TOP 10 영상 분석
3. 각 영상의 Transcript 키워드 비교
4. 제목 패턴 분석 (길이, 이모지, 숫자 사용)
5. 썸네일 패턴 육안 확인 (일단 수동)
6. 성공 공식 도출
```

---

## 🖥 UI/UX 설계

### 메인 화면: 피드 뷰

```
┌─────────────────────────────────────────────────────────────┐
│  📺 구독 채널 피드 인텔리전스                    [새로고침]  │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  📊 대시보드   📋 피드   🔥 트렌드   ⚙️ 설정                │
│                                                               │
├─────────────────────────────────────────────────────────────┤
│  탭: [🎬 롱폼] [📱 쇼츠] [전체]                               │
│                                                               │
│  필터:                                                        │
│  [어제 올라온 영상 ▼]  [전체 카테고리 ▼]                    │
│                                                               │
│  정렬:                                                        │
│  [최신순 ▼]  조회수순  좋아요율순  댓글수순                  │
│                                                               │
│  조회수 필터:  [ ] 평균 이상만   [ ] 2배 이상만              │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │ 🎥 [썸네일]  📺 3Blue1Brown                  [🎬 롱폼] │  │
│  │              🎬 The Essence of Calculus                │  │
│  │              👁 1.2M · 👍 45K (3.8%) · 💬 2.1K        │  │
│  │              ⏱ 17:04 · 🕐 2시간 전                    │  │
│  │              🏷 #교육 #수학                            │  │
│  │              🔥 평균 대비 3.2배 조회수                 │  │
│  │              [자막 다운로드]  [YouTube에서 보기]      │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │ 🎥 [썸네일]  📺 Veritasium                   [🎬 롱폼] │  │
│  │              🎬 Why This Puzzle is Impossible          │  │
│  │              👁 856K · 👍 32K (3.7%) · 💬 1.5K        │  │
│  │              ⏱ 12:34 · 🕐 5시간 전                    │  │
│  │              🏷 #교육 #과학                            │  │
│  │              [자막 다운로드]  [YouTube에서 보기]      │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │ 🎥 [썸네일]  📺 매미킴                       [📱 쇼츠] │  │
│  │              🎬 충격적인 역사적 사실 10가지            │  │
│  │              👁 45K · 👍 1.2K (2.7%) · 💬 89          │  │
│  │              ⏱ 0:58 · 🕐 어제                         │  │
│  │              🏷 #랭킹 #미스터리                         │  │
│  │              [자막 다운로드]  [YouTube에서 보기]      │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                               │
│  [더 보기...]                                                 │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

### 트렌드 대시보드

```
┌─────────────────────────────────────────────────────────────┐
│  🔥 트렌드 인사이트                                          │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  📅 기간: [지난 7일 ▼]    📂 카테고리: [전체 ▼]            │
│                                                               │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌─── 🔑 핫 키워드 TOP 10 ────────────────────────────────┐ │
│  │                                                          │ │
│  │  1. 충격적인       ████████████ (42회)                  │ │
│  │  2. 역대급         ██████████   (38회)                  │ │
│  │  3. TOP 10        █████████    (35회)                  │ │
│  │  4. 미스터리       ████████     (32회)                  │ │
│  │  5. 진짜           ███████      (28회)                  │ │
│  │  6. 순위           ██████       (24회)                  │ │
│  │  7. 역사           █████        (20회)                  │ │
│  │  8. 비밀           ████         (18회)                  │ │
│  │  9. 과학           ████         (17회)                  │ │
│  │  10. 놀라운        ███          (15회)                  │ │
│  │                                                          │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                               │
│  ┌─── 📊 쇼츠 vs 롱폼 비교 ───────────────────────────────┐ │
│  │                                                          │ │
│  │  📱 쇼츠 (85개):     평균 조회수 126K  |  좋아요율 4.2% │ │
│  │  🎬 롱폼 (125개):    평균 조회수 89K   |  좋아요율 3.8% │ │
│  │                                                          │ │
│  │  💡 인사이트: 쇼츠가 조회수 1.4배 높지만,               │ │
│  │              롱폼이 시청시간 더 길어 수익성↑            │ │
│  │                                                          │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                               │
│  ┌─── 📊 성공 영상 패턴 분석 (롱폼 기준) ─────────────────┐ │
│  │                                                          │ │
│  │  평균 조회수 2배 이상 영상 (23개) vs 일반 영상 (102개)  │ │
│  │                                                          │ │
│  │  제목 길이:                                              │ │
│  │    성공: 평균 48자  |  일반: 평균 62자                   │ │
│  │    💡 인사이트: 제목이 짧을수록 클릭률 높음              │ │
│  │                                                          │ │
│  │  숫자 사용:                                              │ │
│  │    성공: 78% 사용   |  일반: 34% 사용                    │ │
│  │    💡 인사이트: "TOP 10", "5가지" 같은 숫자 제목 효과적  │ │
│  │                                                          │ │
│  │  이모지 사용:                                            │ │
│  │    성공: 65% 사용   |  일반: 41% 사용                    │ │
│  │    💡 인사이트: 이모지로 시선 끌기                       │ │
│  │                                                          │ │
│  │  영상 길이:                                              │ │
│  │    성공: 평균 11:23  |  일반: 평균 15:47                 │ │
│  │    💡 인사이트: 8-12분 영상이 최적                       │ │
│  │                                                          │ │
│  │  업로드 시간:                                            │ │
│  │    성공: 18-20시 (43%)  |  일반: 다양                    │ │
│  │    💡 인사이트: 저녁 6-8시 업로드가 유리                 │ │
│  │                                                          │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                               │
│  ┌─── 🎯 추천 액션 아이템 ────────────────────────────────┐ │
│  │                                                          │ │
│  │  ✅ 1. 제목을 50자 이내로 줄이기                         │ │
│  │        예: "충격적인 역사 TOP 10" (12자)                 │ │
│  │                                                          │ │
│  │  ✅ 2. 숫자 리스트 포맷 사용하기                         │ │
│  │        "5가지", "TOP 10", "3가지 방법" 등               │ │
│  │                                                          │ │
│  │  ✅ 3. 영상 길이를 8-12분으로 맞추기                     │ │
│  │        시청 완료율이 높아져 알고리즘 선택 가능성↑        │ │
│  │                                                          │ │
│  │  ✅ 4. 오후 6-8시에 업로드하기                           │ │
│  │        경쟁 채널들이 이 시간대에 가장 많은 조회수 획득   │ │
│  │                                                          │ │
│  │  ✅ 5. 이번 주 핫 키워드 활용: "충격적인", "역대급"      │ │
│  │                                                          │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

### Transcript 다운로드 (간소화)

"자막 다운로드" 버튼 클릭 시:

```
┌─────────────────────────────────────────────────────────────┐
│  📝 자막 다운로드                                        [X]  │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  📺 The Essence of Calculus - 3Blue1Brown                   │
│  ⏱ 17:04 · 👁 1.2M                                           │
│                                                               │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  자막 언어:  [한국어 ▼]  영어  자동생성(영어)               │
│                                                               │
│  저장 포맷:  ( ) TXT   (•) JSON   ( ) SRT                    │
│                                                               │
│  ┌──────────────────────────────────────────────────────┐   │
│  │  미리보기:                                            │   │
│  │                                                        │   │
│  │  [0:04] This is a 3...                                │   │
│  │  [0:10] but your brain has no trouble...             │   │
│  │  [0:14] And I want you to take a moment...           │   │
│  │  ...                                                   │   │
│  │                                                        │   │
│  │  총 286개 세그먼트, 약 18,430자                       │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                               │
│  [다운로드]  [취소]                                           │
│                                                               │
│  💡 다운로드 후 직접 분석하거나, 다른 도구에 활용하세요.     │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

**다운로드 파일 예시:**
```
transcripts/
  ├── aircAruvnKk_ko.txt
  ├── aircAruvnKk_en.json
  └── ...
```

---

## 🗄 데이터베이스 스키마

```sql
-- 구독 채널
CREATE TABLE subscribed_channels (
    channel_id TEXT PRIMARY KEY,
    channel_name TEXT NOT NULL,
    category TEXT,  -- 사용자가 수동으로 태그 (랭킹, 미스터리, 교육 등)
    subscriber_count INTEGER,
    last_updated TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 피드 영상
CREATE TABLE feed_videos (
    video_id TEXT PRIMARY KEY,
    channel_id TEXT NOT NULL,
    title TEXT NOT NULL,
    description TEXT,
    thumbnail_url TEXT,
    published_at TIMESTAMP NOT NULL,
    duration INTEGER,  -- 초 단위
    is_short BOOLEAN DEFAULT FALSE,  -- 쇼츠 여부 (60초 이하)

    -- 통계
    view_count INTEGER,
    like_count INTEGER,
    comment_count INTEGER,

    -- 분석용
    title_length INTEGER,
    has_number BOOLEAN,  -- 제목에 숫자 포함 여부
    has_emoji BOOLEAN,   -- 이모지 포함 여부

    -- Transcript (선택)
    has_transcript BOOLEAN DEFAULT FALSE,
    transcript_language TEXT,

    -- 메타
    collected_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_updated TIMESTAMP,

    FOREIGN KEY (channel_id) REFERENCES subscribed_channels(channel_id)
);

-- Transcript (선택 - 사용자가 직접 다운로드 시에만 저장)
CREATE TABLE video_transcripts (
    video_id TEXT PRIMARY KEY,
    file_path TEXT,  -- 로컬 파일 경로 (다운로드된 위치)
    word_count INTEGER,
    downloaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (video_id) REFERENCES feed_videos(video_id)
);

-- 카테고리 (사용자 정의)
CREATE TABLE categories (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT UNIQUE NOT NULL,
    emoji TEXT,
    color TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 채널-카테고리 매핑 (다대다)
CREATE TABLE channel_categories (
    channel_id TEXT,
    category_id INTEGER,
    PRIMARY KEY (channel_id, category_id),
    FOREIGN KEY (channel_id) REFERENCES subscribed_channels(channel_id),
    FOREIGN KEY (category_id) REFERENCES categories(id)
);

-- 인덱스
CREATE INDEX idx_feed_videos_published_at ON feed_videos(published_at DESC);
CREATE INDEX idx_feed_videos_channel_id ON feed_videos(channel_id);
CREATE INDEX idx_feed_videos_view_count ON feed_videos(view_count DESC);
```

---

## ⚙️ 핵심 기능 명세

### 1. 데이터 수집 (collectors/feed_collector.py)

```python
class FeedCollector:
    def collect_subscriptions(account_name):
        """구독 채널 목록 수집"""
        # API: subscriptions().list()
        # DB에 저장: subscribed_channels

    def collect_feed_videos(channel_id, max_results=10):
        """채널별 최신 영상 수집"""
        # API: playlistItems().list() + videos().list()
        # DB에 저장: feed_videos
        # 제목 분석: 길이, 숫자, 이모지
        # 쇼츠 구분: duration <= 60초

    def collect_all_feeds():
        """모든 구독 채널의 최신 영상 수집"""
        # 각 채널당 최신 10개
        # 하루 1-2회 실행 (cron)
        # 롱폼 vs 쇼츠 자동 분류

    def download_transcript(video_id, save_path):
        """Transcript 다운로드 (사용자가 버튼 클릭)"""
        # youtube-transcript-api 사용
        # TXT 파일로 저장
        # DB에 파일 경로만 저장: video_transcripts
```

### 2. 분석 엔진 (analysis/feed_analyzer.py)

```python
class FeedAnalyzer:
    def get_trending_keywords(days=7, category=None):
        """핫 키워드 TOP 10 (제목 기반)"""
        # 영상 제목에서 키워드 추출 (konlpy)
        # 빈도수 계산
        # 카테고리별 필터 가능

    def compare_successful_videos():
        """성공 영상 vs 일반 영상 패턴 분석"""
        # 성공 기준: 채널 평균 대비 2배 이상 조회수
        # 비교 항목: 제목 길이, 숫자 사용, 이모지, 영상 길이, 업로드 시간
        # 롱폼 vs 쇼츠 별도 분석
        # 통계: 평균, 비율

    def compare_shorts_vs_longform():
        """쇼츠 vs 롱폼 성과 비교"""
        # 평균 조회수, 좋아요율 비교
        # 어느 포맷이 더 효과적인지 분석

    def generate_action_items():
        """실행 가능한 액션 아이템 생성"""
        # 패턴 분석 결과 기반
        # 구체적인 추천 생성

    def extract_title_patterns():
        """제목 패턴 추출"""
        # 자주 사용되는 단어 조합
        # 템플릿 생성: "충격적인 X 10가지"
```

### 3. 대시보드 (app/pages/feed_dashboard.py)

```python
# Streamlit 멀티페이지
# 1. 피드 뷰
# 2. 트렌드 대시보드
# 3. 설정 (카테고리 관리)
```

---

## 📊 인사이트 로직

### 성공 영상 기준
```python
# 채널별 평균 조회수 계산
channel_avg_views = videos.groupby('channel_id')['view_count'].mean()

# 성공 영상: 평균 대비 2배 이상
successful = videos[videos['view_count'] >= channel_avg_views[videos['channel_id']] * 2]
```

### 키워드 추출 (한국어)
```python
from konlpy.tag import Okt
from collections import Counter

def extract_keywords(text):
    okt = Okt()
    nouns = okt.nouns(text)
    # 불용어 제거
    stopwords = ['것', '등', '수', '때', ...]
    keywords = [n for n in nouns if n not in stopwords and len(n) > 1]
    return Counter(keywords).most_common(10)
```

### 제목 패턴 분석
```python
import re
import emoji

def analyze_title(title):
    return {
        'length': len(title),
        'has_number': bool(re.search(r'\d+', title)),
        'has_emoji': bool(emoji.emoji_count(title)),
        'number_count': len(re.findall(r'\d+', title))
    }
```

---

## 🚀 개발 우선순위

### Phase 1: MVP (2-3일) ⭐⭐⭐
**목표**: 기본 피드 보기 가능

```
✅ 1. DB 스키마 생성 (is_short 컬럼 포함)
✅ 2. 구독 채널 수집
✅ 3. 최신 영상 수집 (채널당 10개)
   - 쇼츠/롱폼 자동 구분 (60초 기준)
✅ 4. 피드 뷰 UI
   - 제목, 썸네일, 조회수, 시간
   - 쇼츠/롱폼 배지 표시
   - 최신순 정렬
   - YouTube 링크
✅ 5. 간단한 필터
   - 탭: 롱폼/쇼츠/전체
   - 날짜 (어제/지난 7일/지난 30일)
   - 조회수순 정렬
```

**성공 기준**: 구독 채널 50개의 최신 영상 500개를 쇼츠/롱폼 구분해서 나열

---

### Phase 2: 카테고리 & 필터 (1-2일) ⭐⭐⭐
**목표**: 카테고리별로 분류해서 보기

```
✅ 1. 카테고리 CRUD UI
   - 카테고리 생성 (이름, 이모지, 색상)
   - 채널에 카테고리 태그
✅ 2. 카테고리 필터
   - 탭으로 표시
   - 필터 적용
✅ 3. 고급 필터
   - 조회수 범위
   - 평균 대비 N배 이상
   - 영상 길이 범위
```

**성공 기준**: "랭킹" 카테고리만 선택해서 보기 가능

---

### Phase 3: Transcript 다운로드 (선택) ⭐
**목표**: Transcript를 직접 다운받을 수 있게

```
✅ 1. Transcript 다운로드 버튼
   - "자막 다운로드" 버튼 클릭
   - TXT/JSON 파일로 저장
   - 로컬에서 직접 분석
✅ 2. (선택) 업로드 기능
   - 다운받은 Transcript 업로드
   - 키워드 추출 & 표시
```

**성공 기준**: "자막 다운로드" 버튼 클릭 → 파일 저장됨

**간소화 이유**:
- 자동 수집은 복잡하고 모든 영상에 필요하지 않음
- 관심 있는 영상만 직접 다운로드가 더 실용적
- API quota 절약

---

### Phase 4: 인사이트 & 추천 (2-3일) ⭐⭐
**목표**: 실행 가능한 인사이트

```
✅ 1. 쇼츠 vs 롱폼 비교
   - 평균 조회수, 좋아요율 비교
   - 어느 포맷이 효과적인지 분석
✅ 2. 성공 영상 패턴 분석 (롱폼 기준)
   - 제목 길이, 숫자, 이모지
   - 영상 길이
   - 업로드 시간
✅ 3. 트렌드 대시보드
   - 핫 키워드 시각화 (제목 기반)
   - 패턴 비교 차트
✅ 4. 액션 아이템 자동 생성
   - 구체적 추천
   - 우선순위 표시
```

**성공 기준**: "이번 주 이렇게 하면 좋겠어요" 추천 3개 이상 자동 생성 + 쇼츠/롱폼 어느 것이 유리한지 명확히 표시

---

### Phase 5: 고급 기능 (선택) ⭐
```
- 제목 템플릿 생성기
- 썸네일 이미지 분석 (CV)
- 토픽 모델링 (LDA)
- 감성 분석
- 경쟁 채널 추가 (구독 안 한 채널도)
```

---

## 💰 비용 & 성능

### API Quota
```
구독 50개 채널 × 10개 영상 = 151 units (1.5%)
하루 2회 수집 = 302 units (3%)
완전 무료!
```

### 저장 용량
```
영상 메타데이터: 500개 × 1KB = 500KB
Transcript: 100개 × 20KB = 2MB (선택적 수집)
총: ~3MB (매우 가벼움)
```

### 수집 시간
```
구독 목록: 1초
영상 50개 × 10개 = 500개: ~30초
Transcript: 영상당 1-2초 (on-demand)
총: ~1분 이내
```

---

## 🎯 성공 지표

### MVP 완료 시
- [ ] 구독 채널 50개 수집 완료
- [ ] 최신 영상 500개 피드에 표시
- [ ] 날짜/조회수 필터 작동
- [ ] YouTube 링크 이동 가능

### Phase 2 완료 시
- [ ] 카테고리 5개 이상 생성
- [ ] 카테고리별 필터 작동
- [ ] "랭킹" 카테고리만 20개 영상 표시

### Phase 3 완료 시
- [ ] Transcript 수집 성공률 80% 이상
- [ ] 키워드 TOP 10 표시
- [ ] 검색 기능 작동

### Phase 4 완료 시
- [ ] 성공 영상 패턴 자동 분석
- [ ] 액션 아이템 3개 이상 자동 생성
- [ ] 트렌드 대시보드 완성

---

## 🤔 FAQ & 예상 이슈

### Q1: 구독 채널이 80개인데 전부 수집?
**A**: 선택적 수집 가능하게 설정 페이지에서 ON/OFF

### Q2: Transcript가 없는 영상?
**A**: "자막 없음" 표시, 제목/설명으로만 분석

### Q3: 한국어 vs 영어 채널 섞여있으면?
**A**: 언어별 키워드 추출 (konlpy vs NLTK)

### Q4: 업데이트 주기?
**A**: 하루 2회 (아침 9시, 저녁 9시) 자동 수집

### Q5: 모바일에서도 볼 수 있나?
**A**: Streamlit은 반응형, 모바일 브라우저에서 가능

---

## 📝 요약 & 다음 단계

### 주요 기능
1. **피드 뷰**: 구독 채널 최신 영상, 쇼츠/롱폼 탭, 카테고리 필터
2. **트렌드 분석**: 핫 키워드, 성공 패턴, 쇼츠 vs 롱폼 비교
3. **자막 다운로드**: 버튼 클릭으로 Transcript 다운로드 (TXT/JSON/SRT)

### 개발 기간
- Phase 1 (MVP): 2-3일
- Phase 2 (카테고리): 1-2일
- Phase 3 (자막 다운로드): 1일
- Phase 4 (인사이트): 2-3일
- **총 6-9일** (1-2주)

### 비용
- **완전 무료** (API quota 1.5%)

---

**지금 시작할 것:**
1. Phase 1 MVP부터 개발?
2. DB 스키마 먼저 생성?
3. UI 프로토타입 먼저?

어떻게 하고 싶으세요?
